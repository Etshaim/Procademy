#ifndef __PARSER__
#define __PARSER__

#include <Windows.h>

class CParser
{
public :
	enum eAYA_INI_PARSE
	{
		eBUFFER_SIZE		= 512000	// 구역을 메모리에 읽을 버퍼
	};
	
	////////////////////////////////////////////////////////////
	// 생성자, 파괴자
	////////////////////////////////////////////////////////////
	CParser();
	~CParser();

	////////////////////////////////////////////////////////////
	// 초기화
	////////////////////////////////////////////////////////////
	void	Initial(void);

	////////////////////////////////////////////////////////////
	// 텍스트 파일 열기
	////////////////////////////////////////////////////////////
	BOOL	LoadFile(char *szFileName);

	////////////////////////////////////////////////////////////
	//	구역 나누기
	////////////////////////////////////////////////////////////
	BOOL	ProvideArea(char *szAreaName);

	////////////////////////////////////////////////////////////
	// 값 얻기
	//		문자열
	//		int
	//		float
	////////////////////////////////////////////////////////////
	BOOL	GetValue(char *szName, char *szValue, int *ipBufferSize);
	BOOL	GetValue(char *szName, int *ipValue);
	BOOL	GetValue(char *szName, float *fpValue);
	
protected:

	////////////////////////////////////////////////////////////
	// 스페이스, 탭, 엔터코드, 주석 처리
	// m_chBuffer에 로드된 정보를 m_iBufferFocusPos부터 주석처리하고
	// 다음 위치를 찾아낸다
	////////////////////////////////////////////////////////////
	BOOL	SkipNoneCommand(void);

	////////////////////////////////////////////////////////////
	// 다음 단어 얻기
	// 현재 버퍼의 m_iBufferPos부터 다음 단어 위치를 얻는다
	// m_iBufferFocusPos는 얻은 단어의 끝에 위치
	////////////////////////////////////////////////////////////
	BOOL	GetNextWord(char **chppBuffer, int *ipLength);

	////////////////////////////////////////////////////////////
	// 문자열 읽기
	// m_iBufferFocusPos는 얻은 문자열 끝에 위치.
	////////////////////////////////////////////////////////////
	BOOL	GetStringWord(char **chppBuffer, int *ipLength);

protected:
	char	*m_chpBuffer;	// 버퍼

	int		m_iLoadSize;	// 버퍼에 로드된 크기

	int		m_iBufferAreaStart;	// 시작 위치
	int		m_iBufferAreaEnd;	// 끝 위치
	int		m_iBufferFocusPos;	// 현재 위치
	
	BOOL	m_bProvideAreaMode;	// 구역 찾는 중
};

#endif //__PARSER__